@using System.Web.Optimization
@using EPiServer.Core
@using EPiServer.Web.Mvc.Html
@using Ferrara

@model Ferrara.Sites.Shared.PageViewModel<Ferrara.Sites.TopMenuSite.SharedProductDetailsPage.SharedProductDetailsPage>

<div class="product-details-page container-fluid">
    <div class="row">
        <div class="@((Model.CurrentPage.BrandsCode).Equals("murraysugarfree") ? "col-lg-8" : "col-lg-8 row fa-carousel")">
            <div class="@((Model.CurrentPage.BrandsCode).Equals("murraysugarfree") ? "col-12 carousel-container" : "col-sm-12 col-md-6")">
                <div class="blurry-bg"></div>
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        @Html.PropertyFor(x => x.CurrentPage.ProductImages, new { CssClass = "carousel-img-hide" })
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
            <div class="@((Model.CurrentPage.BrandsCode).Equals("murraysugarfree") ? "col-12 main-content-area" : "col-sm-12 col-md-6 main-content-area")">
                <div class="blurry-bg"></div>
                <h1>@Html.PropertyFor(x => x.CurrentPage.ProductName)</h1>
                <div class="product-details">@Html.PropertyFor(x => x.CurrentPage.ProductDetails)</div>
                <div id="nutrition-dropdown">
                    <label class="sizesDropDown">Available in these sizes:</label>
                    <select id="dropdown-content" class="dropdown-content custom-select" onchange="exports.nutritionDropDownFunc(value);"></select>
                </div>
                <div class="buy-now-container">
                    <button type="button" data-toggle="modal" data-target="#widget-modal" class="buy-now-btn btn btn-secondary btn-lg"
                            onclick="destiniFunction('destinidiv', '@Model.CurrentPage.WhereToBuyProductID')">
                        Buy Now
                    </button>
                    <!-- Where to Buy Modal -->
                    <div class="modal fade" id="widget-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel"></h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div id="destinidiv" src=""></div>
                                </div>
                                <div class="modal-footer">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>

        <div class="col-md-12 col-lg-4">
            @Html.PropertyFor(x => x.CurrentPage.NutritionBlocks, new { CssClass = "row equal-height", tag = Global.ContentAreaTags.FullWidth })
        </div>
    </div>
</div>
<script>
    function destiniFunction(containerId, associationId) {
        destini.init(containerId);
        destini.loadWidget(associationId);
    }
</script>
@Scripts.Render("~/bundles/js/SharedProductDetailsPage")